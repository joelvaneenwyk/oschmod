[tox]
envlist =
    py3{13,12,11,10,9}
    py3{13,12,11,10,9}-test
    mypy
    ruff
requires =
    tox>=4.11
isolated_build = True
parallel_show_output = true
skip_missing_interpreters = true
provision_tox_env = true
work_dir = {tox_root}/.cache/tox

[testenv]
set_env =
    COVERAGE_FILE={env:COVERAGE_FILE:{toxworkdir}{/}.coverage.{envname}}
    COVERAGE_PROCESS_START={toxinidir}{/}pyproject.toml
    PYTHONWARNDEFAULTENCODING=1
allowlist_externals =
    python
    python3
pass_env =
    PYTEST_*
    SSL_CERT_FILE

[testenv:py3{12,11,10,9,8}-test]
skip_install = False
extras =
    test
commands = pytest tests/

[testenv:mypy]
skip_install = True
deps =
    mypy
    pytest
commands = mypy src/ tests/

[testenv:ruff]
skip_install = True
deps =
    ruff
commands =
    ruff check .
    ruff format .
